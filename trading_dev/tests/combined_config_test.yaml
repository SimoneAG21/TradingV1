# Main test configuration file for TradingV1, used by ConfigManager.
# Defines settings, processes, and menu for testing all features in
# test_config_manager.py. Loaded by app.py, telegram_fetch.py, and Heroku
# (seanstrader) during development and testing.
#tests/combined_config_test.yaml


logging:
  log_dir_name:
    value: logs
    type: string
  log_file_max_bytes:
    value: 5000
    type: integer
  log_gen_level:
    value: INFO
    type: string

database:
  type: sqlite
  path: :memory
  mysql:
    user: test_user
    password: test_pass
    host: localhost
    port: 3306
    database: test_db

constants:
  max_retries:
    value: 2
    type: integer
  is_test_mode:
    value: true
    type: boolean

menu:
  Main:
    Trading:
      help: Test trading menu
      Start:
        help: Start test trade
        params:
          amount:
            default: 50.0
            type: float
    Settings:
      help: Test settings
    Exit:
      help: Exit test

templates:
  default_process:
    interval:
      value: 60
      type: integer
    enabled:
      value: true
      type: boolean

processes:
  - id: fetch
    interval:
      value: 60
      type: integer
    enabled:
      value: true
      type: boolean
  - template: default_process
    priority:
      value: high
      type: string
  - conditions:
      test:
        interval:
          value: 30
          type: integer
        mode:
          value: debug
          type: string
      prod:
        interval:
          value: 300
          type: integer
        mode:
          value: optimized
          type: string
  - interval:
      value: 120
      type: integer
    sql:
      fetch_messages: |
        SELECT * FROM telegram_messages WHERE timestamp > NOW() - INTERVAL '1 hour';

includes:
  - tests/processes.yaml